# root

## package.json

```json
{
	"dependencies": {
		"yargs": "^17.7.2"
	},
	"devDependencies": {
		"@types/jest": "^29.5.14",
		"jest": "^29.7.0"
	}
}

```

## README-ProjectPackager.md

```md
<!--
Copyright (c) 2024 Martin Bechard <martin.bechard@DevConsult.ca>
This software is licensed under the MIT License.
File: /Users/martinbechard/dev/projectPackager/README-ProjectPackager.md
This was generated by Claude Sonnet 3.5, with the assistance of my human mentor
-->

/\*\*

- Copyright (c) 2024 Martin Bechard <martin.bechard@DevConsult.ca>
- This software is licensed under the MIT License.
- File: scripts/README-ProjectPackager.md
- This document was generated by Claude Sonnet 3.5, with the assistance of my human mentor
- A comprehensive guide to the Project Packager utility - because packaging code is like gift wrapping for developers!
  \*/

# Project Packager Utility

## Overview

The Project Packager is a utility designed to package your Next.js project files for easier sharing and analysis. It traverses your project directory, concatenates files of similar types, and saves them in a specified output folder. This tool is perfect for when you need to bundle your code for review, archiving, or just to marvel at your project's complexity in one place.

Key features include:

- File concatenation and organization
- Unpackaging of previously packaged files
- Built-in testing feature with watch mode
- File tree generation for project structure visualization
- Comment checking and addition for proper file documentation

## Installation

1. Place the `projectPackager.js` and `projectPackager.json` files in a `scripts` folder in your project root.
2. Install the required dependencies:

```bash
pnpm add yargs
pnpm add -D jest @types/jest
```

## Usage

Run the script from your project root directory:

```bash
node scripts/projectPackager.js [options]
```

## Command-line Options

- `--verbose`, `-v`: Run with verbose logging (for when you want to know EVERYTHING)
- `--dumpFileMap`, `-d`: Dump all files as a file map (a bird's-eye view of your project)
- `--addMissingComments`, `-a`: Add missing file path and copyright comments to original files (because good code is commented code)
- `--unpackage`, `-u`: Unpackage previously packaged files (for when you need to spread your wings again)
- `--test`, `-t`: Run unit tests (keep your code in check!)
- `--generateFileTree`, `-g`: Generate a file tree suitable for README (show off your project's structure)
- `--watch`, `-w`: Run tests in watch mode (default: true) (for the vigilant developer)
- `--help`, `-h`: Show help (when all else fails, read the manual)

Examples:

```bash
node scripts/projectPackager.js --verbose --addMissingComments
node scripts/projectPackager.js --unpackage
node scripts/projectPackager.js --test
node scripts/projectPackager.js --test --watch=false
node scripts/projectPackager.js --generateFileTree
```

## Configuration

The `projectPackager.json` file contains the following configuration options:

```json
{
  "outputFolder": "claude",
  "skipFolders": ["node_modules", "claude", ".next", ".git"],
  "fileTypes": {
    "js": [".js", ".ts", ".tsx"],
    "json": [".json"],
    "md": [".md"],
    "css": [".css"],
    "html": [".html"]
  },
  "copyright": "Copyright (c) 2024 Martin Bechard <martin.bechard@DevConsult.ca>",
  "backupFolder": "backups",
  "readmeTemplatePath": "./scripts/README-ProjectPackager.md",
  "generateReadme": true,
  "addMissingComments": false,
  "fileMapPath": "./claude/fileMap.json"
}
```

- `outputFolder`: The folder where packaged files will be saved (your code's new home)
- `skipFolders`: An array of folder names to skip during processing (because some things are better left alone)
- `fileTypes`: An object defining file extensions to process for each output type (categorize all the things!)
- `copyright`: The copyright notice to be added to files missing it (give credit where it's due)
- `backupFolder`: The folder name for storing backups of modified files (better safe than sorry)
- `readmeTemplatePath`: The path to the README template file (for consistent documentation)
- `generateReadme`: Whether to generate a README in the output folder (spread the knowledge)
- `addMissingComments`: Whether to add missing comments to original files by default (comment all the things!)
- `fileMapPath`: The path where the file map JSON will be saved when using the --dumpFileMap option (map your code jungle)

## Features

1. **File Concatenation**: Combines files of similar types from your project into single files (like a code smoothie).
2. **Progress Tracking**: Displays a progress bar during processing (because watching progress bars is oddly satisfying).
3. **File Checking**: Verifies if each file has the correct file path and copyright comments (keeping your code legally dressed).
4. **Warning System**: Flags files missing proper comments (no comment left behind!).
5. **Comment Addition**: Can add missing file path and copyright comments to original files (automate your documentation).
6. **Backup Creation**: Creates backups of files before modifying them (because time machines don't exist... yet).
7. **File Map Generation**: Can generate a JSON file mapping all processed files and their contents (for the cartographers among us).
8. **Unpackaging**: Can unpackage previously packaged files back into their original structure (put everything back where you found it).
9. **Built-in Testing**: Includes unit tests that can be run directly through the utility (keep your code honest).
10. **File Tree Generation**: Can generate a markdown-friendly file tree of your project structure (see the forest and the trees).

## Output

The utility creates a folder (default: `claude`) in your project root, containing:

1. Concatenated files for each file type and directory (your code, but more organized)
2. A `backups` folder with original versions of modified files (if applicable) (for the "oops" moments)
3. A `fileMap.json` file (if the `--dumpFileMap` option is used) (your project's treasure map)
4. A `README-ProjectPackager.md` file with detailed instructions (if enabled in config) (you're reading it!)
5. A `fileTree.md` file containing the project structure (if the `--generateFileTree` option is used) (your code's family tree)

## Running Tests

To run the built-in unit tests, use the `--test` or `-t` option:

```bash
node scripts/projectPackager.js --test
```

By default, this will run the tests in watch mode, perfect for continuous development. To run tests without watch mode, use:

```bash
node scripts/projectPackager.js --test --watch=false
```

This will execute the Jest tests defined in `projectPackager.test.js`. Remember, a tested project is a happy project!

## Generating File Tree

To generate a file tree structure of your project, use the `--generateFileTree` or `-g` option:

```bash
node scripts/projectPackager.js --generateFileTree
```

This will create a `fileTree.md` file in the output folder, containing a markdown-friendly representation of your project's file structure. It's like a family tree, but for your code!

## Warnings and Error Handling

- Warnings about missing comments are displayed after processing (we'll tell you what you forgot).
- If errors occur during file writing, they are logged, and an error header is added to the affected file (we try to fail gracefully).

## Best Practices

1. Always run the script with the `--verbose` option first to see detailed logs (knowledge is power).
2. Use the `--addMissingComments` option cautiously, as it modifies original files (with great power comes great responsibility).
3. Review the `projectPackager.json` configuration before running to ensure correct settings (measure twice, cut once).
4. Check the generated output and warnings to ensure all files are processed as expected (trust, but verify).
5. When unpackaging, ensure you have backups of any files that might be overwritten (better safe than sorry, part 2).
6. Run the tests regularly, especially after making changes to the utility (keep your tool sharp).
7. Use the file tree generation feature to keep your project documentation up-to-date (a well-documented project is a loved project).

## Troubleshooting

If you encounter issues:

1. Check the console output for error messages and warnings (the utility tries to be helpful).
2. Verify that the `projectPackager.json` configuration is correct (typos are the bane of configuration files).
3. Ensure you have the necessary permissions to read/write files in your project directory (permission denied is no fun).
4. If files are being modified, check the `backups` folder for original versions (your safety net).
5. Run the tests using the `--test` option to check for any functional issues (let the tests guide you).
6. If the file tree seems incorrect, ensure that the `skipFolders` configuration is set correctly (you might be accidentally pruning your tree).

For further assistance, please refer to the project's issue tracker or contact the maintainer. Remember, every bug is just an undocumented feature waiting to be discovered!

Happy packaging, and may your code always compile on the first try!

```
